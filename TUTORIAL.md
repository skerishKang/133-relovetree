# ReloveTree 사용 튜토리얼 (사용자용)

이 문서는 **일반 사용자**가 ReloveTree를 처음 접했을 때, 
"어디서 무엇을 눌러서 어떻게 쓰면 되는지"를 단계별로 안내하는 튜토리얼입니다.

서비스 주소 예시: `https://relovetree.web.app` (운영 환경에 따라 달라질 수 있습니다)

---

## 1. 시작하기

- **브라우저에서 ReloveTree 주소로 접속**합니다.
- PC, 태블릿, 스마트폰 어디서든 접속 가능하며,
  화면 크기에 따라 자동으로 레이아웃이 조정됩니다.

### 1.1. 로그인 / 회원가입

- 화면 상단 오른쪽에 **로그인 영역**이 보입니다.
  - **Google 계정 로그인** 버튼: 구글 계정으로 바로 로그인/회원가입
  - **이메일 로그인 링크**: `login.html` 페이지로 이동하여
    이메일 + 비밀번호로 회원가입/로그인이 가능합니다.

> 로그인하지 않아도 공개 트리를 구경할 수 있지만,
> **내 러브트리 만들기 / 수정 / 저장**을 하려면 로그인이 필요합니다.

---

## 2. 내 첫 러브트리 만들기

1. 홈 화면 중앙 또는 상단 근처에 있는 **"새 트리 만들기" 혹은 러브트리 생성 버튼**을 클릭합니다.
2. 트리의 기본 정보를 입력합니다.
   - **트리 이름**: 예) `나의 BTS 입덕 타임라인`
   - (선택) 간단한 설명, 공개 여부 등 설정 항목이 있을 수 있습니다.
3. 저장/생성 버튼을 누르면 **에디터 화면(`editor.html`)** 으로 이동합니다.

홈 화면에는 보통 다음과 같은 영역이 있습니다.

- **최근 방문한 러브트리**: 방금 열어본 트리 목록
- **나의 러브트리**: 내가 만든 트리 목록
- **지금 뜨는 러브트리 / 최근 만들어진 러브트리**: 인기/최신 트리 모음

원하는 카드(트리)를 클릭하면 해당 트리의 에디터 화면으로 이동합니다.

---

## 3. 러브트리 에디터 사용법

트리 편집 화면(`editor.html`)은 크게 다음과 같이 구성됩니다.

- **상단 바**: 트리 제목, 모드 전환(트리/리스트), AI 버튼, 공유/좋아요, 통계 등
- **왼쪽/가운데 영역**: 실제 트리(나무 형태) 또는 리스트(타임라인) 뷰
- **오른쪽/하단 패널**: 선택한 노드의 상세 정보, 코멘트, 모먼트 편집 등

### 3.1. 노드(순간) 추가하기

- 트리 뷰에서 **"+" 나 새 노드 추가 버튼**을 눌러 **새 순간(노드)** 를 만듭니다.
- 각 노드는 보통 다음과 같은 정보를 가집니다.
  - **제목**: 이 순간을 한 줄로 요약한 이름
  - **날짜**: `YYYY-MM-DD` 형식의 날짜 (대략적인 날짜도 괜찮음)
  - **설명**: 이 순간에 대한 간단한 설명, 감정, 생각
  - **YouTube 링크 / videoId (선택)**: 관련 영상이 있다면 붙여넣기
  - **모먼트(moments)**: 영상 안에서 `MM:SS` 단위로, 인상적인 장면을 여러 개 기록

노드를 클릭하면 오른쪽 상세 패널에서 내용을 수정할 수 있습니다.

### 3.2. 트리 모드 / 리스트(타임라인) 모드

- 에디터 상단 오른쪽에 **`트리` / `리스트`** 같은 탭/버튼이 있습니다.
  - **트리 모드**: 나무/그래프 형태로 순간들이 가지처럼 연결되어 보입니다.
  - **리스트(타임라인) 모드**: 시간순 카드 리스트로 정렬되어, 세로 타임라인처럼 볼 수 있습니다.
- 같은 데이터에 대해 **표현 방식만 다르게** 보여주는 것이므로,
  한쪽에서 수정한 내용은 다른 쪽에도 그대로 반영됩니다.

### 3.3. 모바일에서 사용하기

- 별도의 모바일 전용 모드는 없습니다.
- 화면 폭에 따라 **자동으로 반응형 레이아웃**이 적용됩니다.
  - 스마트폰: 한 열 레이아웃, 상단 바가 한 줄 혹은 두 줄로 접힘
  - 태블릿/PC: 더 넓은 캔버스와 패널 배치

---

## 4. AI 도우미로 타임라인 채우기

ReloveTree에는 Google Gemini 기반 **AI 도우미**가 연결되어 있어,
트리 전체 뼈대를 만들거나, 각 노드의 설명을 다듬을 수 있습니다.

### 4.1. 트리 뼈대 만들어 달라고 부탁하기

1. 에디터 상단의 **AI 버튼**을 눌러 **AI 도우미 창(모달)** 을 엽니다.
2. "트리 만들기" 또는 비슷한 이름의 탭에서 다음 정보를 입력합니다.
   - 어떤 그룹/아티스트인지 (예: `BTS`, `NewJeans`)
   - 어떤 타임라인을 만들고 싶은지 (예: `입덕부터 지금까지 중요한 무대 8개만 정리해줘`)
3. 요청을 보내면 AI가 **여러 개의 순간(노드) 제안**을 생성합니다.
4. 마음에 들면 **트리에 적용** 버튼을 눌러 실제 노드로 반영합니다.

AI가 생성하는 정보에는 보통 다음이 포함될 수 있습니다.

- 제목, 날짜, 설명
- (가능한 경우) 관련 YouTube URL 및 videoId
- 영상 안의 하이라이트 모먼트 목록 (시간, 한 줄 코멘트, 감정 태그 등)

### 4.2. 기존 노드를 AI로 다듬기

1. 트리나 리스트에서 **수정하고 싶은 노드**를 선택합니다.
2. 오른쪽 상세 패널에 있는 **"AI로 수정"** 혹은 비슷한 버튼을 누르거나,
   노드를 AI 도우미 창으로 드래그 앤 드롭할 수 있습니다.
3. "이 설명을 더 감성적으로 정리해줘", "한 줄 코멘트 3개만 뽑아줘" 같은 식으로 요청을 적습니다.
4. AI가 제안한 결과를 확인한 뒤, 
   - 전체를 교체하거나
   - 마음에 드는 부분만 골라 직접 복사/수정할 수 있습니다.

### 4.3. 한 줄 코멘트/QA 모드 활용

- **코멘트 모드(comment)**: 특정 순간에 붙일 한국어 한 줄 코멘트를 여러 개 제안받을 수 있습니다.
- **QA 모드(qa)**: "이 트리에서 중요한 포인트가 뭐야?", "이 앱은 어떻게 쓰면 좋아?" 같은 질문에
  간단한 답변을 받아볼 수 있습니다.

---

## 5. 공유와 통계

### 5.1. 공유하기

- 에디터 상단 또는 화면 어딘가에 있는 **공유 버튼**을 사용해,
  트리 링크를 친구에게 보낼 수 있습니다.
- 트리가 공개 설정일 경우, 링크를 받은 사람은 로그인 없이도 내용을 구경할 수 있습니다.

### 5.2. 통계 보기

- 에디터 상단/하단의 통계 영역 또는 배너에서 다음과 같은 정보를 볼 수 있습니다.
  - 노드 개수
  - 기록된 모먼트 개수
  - 조회 수, 좋아요 수, 공유 수 등

시간이 지날수록 러브트리가 얼마나 많이 읽히고 있는지 감을 잡을 수 있습니다.

---

## 6. 자주 묻는 질문 (FAQ)

- **Q. 회원가입/로그인이 꼭 필요한가요?**  
  A. 공개 트리를 보는 것만이라면 로그인 없이도 가능합니다. 
     하지만 **내 러브트리를 만들고 저장**하려면 로그인이 필요합니다.

- **Q. 모바일과 PC 중 어디에서 쓰는 게 좋나요?**  
  A. 둘 다 가능합니다. 
  - **PC/태블릿**: 트리를 크게 보면서 편집하기 좋고,
  - **모바일**: 타임라인을 간단히 훑어보거나, 간단한 수정을 할 때 편합니다.

- **Q. AI가 만든 내용이 마음에 안 들면 어떻게 하나요?**  
  A. AI가 제안한 것은 "초안"일 뿐이니, 
     전체를 버리고 직접 수정하거나, 마음에 드는 부분만 골라 쓰시면 됩니다.

- **Q. 내 러브트리를 비공개로 둘 수 있나요?**  
  A. 트리 생성/설정 화면에서 **공개/비공개 옵션**을 확인해 주세요. 
     (운영 환경 설정에 따라 옵션 명칭은 달라질 수 있습니다.)

---

## 7. 한눈에 보는 사용 흐름

1. 사이트 접속
2. (선택) Google 또는 이메일로 로그인
3. "새 트리 만들기" 버튼으로 첫 러브트리 생성
4. 에디터에서 노드(순간)들을 추가/편집
5. 필요하면 AI 도우미로 뼈대/설명을 채우기
6. 타임라인 모드로 전체 흐름을 확인
7. 공유 링크로 친구들과 나누기

---

## 부록 A. 운영자/개발자용 메모

아래 내용은 **서비스 운영자/개발자**가 환경을 세팅하거나 배포할 때 참고하는 요약입니다.

### A.1. 기술 개요

- **프론트엔드**: Vanilla JS + Tailwind CSS
- **호스팅**: Firebase Hosting (`relovetree` 프로젝트)
- **백엔드 API**
  - Firebase Firestore + Auth (브라우저 SDK)
  - Netlify Functions (`netlify/functions`)로 관리자용 API 및 AI 헬퍼 제공
- **AI**: Google Gemini API (`GEMINI_API_KEYS` 환경 변수 사용)

홈(`index.html`)과 에디터(`editor.html`)는 **단일 반응형 레이아웃**으로 동작하며,
과거에 있던 데스크탑/모바일 프리뷰 토글은 제거되어 있습니다.

### A.2. 로컬 개발 환경

- 필수 도구
  - Node.js LTS (16 이상 권장)
  - npm
  - Firebase CLI (`npm i -g firebase-tools`)

- 의존성 설치

```bash
npm install
```

- Tailwind 빌드

```bash
npm run build
```

`src/input.css` → `output.css`로 빌드되며, HTML은 `output.css`를 참조합니다.

### A.3. Firebase Hosting 프리뷰 & 배포

```bash
firebase login
firebase use relovetree   # 또는 firebase use --add

# 로컬 프리뷰
firebase serve --only hosting
# 또는
firebase emulators:start --only hosting

# 실제 배포
npx firebase-tools deploy --only hosting --project relovetree
```

- 운영 URL 예시: https://relovetree.web.app

### A.4. Netlify Functions (AI 및 관리자 API)

- 주요 함수
  - `netlify/functions/ai-helper.js` : 에디터용 AI 도우미
  - `netlify/functions/tree-admin.js` : 관리자용 트리 관리 API (`/api/admin/trees`)
  - `netlify/functions/tree-ai.js` : 관리자 페이지용 노드 설명 AI

- 환경 변수 (Netlify)
  - `GEMINI_API_KEYS` : 쉼표로 구분된 Gemini API 키 리스트

### A.5. 인증/권한

- 로그인
  - Google OAuth (홈 상단 버튼)
  - 이메일/비밀번호 (`login.html`)
- 관리자 권한
  - Firestore `users` 컬렉션 문서에 `role: 'admin'` 이면 관리자
  - `admin.html`에서 트리/사용자/AI 로그 관리

### A.6. 주요 파일 구조

- `index.html`, `index.js` : 홈 화면
- `editor.html`, `editor_ai.js` : 에디터 및 AI 도우미
- `admin.html`, `admin.js` : 관리자 대시보드
- `functions/` : (레거시) Firebase Functions 폴더 - 현재 운영은 Netlify Functions를 사용하며, 이 폴더는 미사용 상태
- `netlify/functions/` : Netlify Functions (AI 및 관리자 API)
- `src/` : 공용 JS 및 Tailwind 입력 CSS

---

필요에 따라 이 문서를 **사용자용/운영자용으로 더 세분화**하거나,
팀 내 온보딩용으로 복사해 커스터마이즈해도 좋습니다.
