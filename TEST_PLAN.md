# Relovetree 수동 테스트 체크리스트

> 이 문서는 최근까지 적용한 변경 사항(홈 섹션 재배치, 통계 필드, 데모/AI 트리, 관리자 패널 등)을 기준으로 전체 사이트를 수동으로 검증하기 위한 체크리스트입니다.
>
> **권장 브라우저**: Chrome/Edge 최신 버전

---

## 0. 공통 준비

- [ ] Firebase 프로젝트 설정이 올바른지 확인 (프로덕션 DB 기준)
- [ ] 관리자 계정 1개, 일반 사용자 계정 1개 준비
- [ ] 데모 데이터가 없는 상태 / 있는 상태 모두 한 번씩 확인할 계획 세우기
- [ ] (선택) Netlify 프리뷰 URL, Firebase Hosting 프리뷰 URL 메모

---

## 1. 홈 페이지 (index.html)

### 1-1. 섹션 순서 및 레이아웃

- [ ] 페이지 진입 시 섹션 순서가 다음과 같은지 확인
  - 최근 방문한 러브트리
  - 지금 뜨는 러브트리
  - 나의 러브트리
  - 최근 만들어진 러브트리
- [ ] 데스크탑/모바일 뷰에서 섹션 간 여백, 카드 간격, 스크롤 동작이 자연스러운지 확인

### 1-2. 최근 방문한 러브트리 섹션

- [ ] 로그인하지 않은 상태에서 로컬스토리지에 저장된 트리가 있을 경우, 최근 방문 리스트가 표시되는지 확인
- [ ] 트리 편집 후 다시 홈으로 돌아왔을 때 방금 편집한 트리가 최근 방문 리스트 상단에 오는지 확인

### 1-3. 나의 러브트리 섹션 (로그인 필요)

- [ ] 로그인 후, Firestore `trees` 컬렉션 기준으로 본인 소유 트리 목록이 로드되는지 확인
- [ ] 각 카드에 다음 텍스트가 보이는지 확인
  - `N개의 순간 · 조회 V · 좋아요 L · 공유 S`
- [ ] 카드 클릭 시 해당 트리 `editor.html?id=...` 로 정상 이동하는지 확인

### 1-4. 지금 뜨는 러브트리 섹션

- [ ] Firestore에 일정 개수의 트리가 있을 때, "지금 뜨는 러브트리" 카드가 노출되는지 확인
- [ ] 카드 하단에 다음 정보가 보이는지 확인
  - `N개의 순간 · 조회 V · 좋아요 L · 공유 S`
- [ ] 좋아요/조회/공유 수가 높은 트리가 상단에 더 자주 보이는지 (랭킹 스코어 반영) 대략적인 감으로 확인
- [ ] Firestore 쿼리 실패 시 기본 데모 카드(정적 아티스트 카드)로 폴백되는지 확인

### 1-5. 최근 만들어진 러브트리 섹션

- [ ] Firestore `trees` 컬렉션에 트리가 없을 때: 섹션 전체가 렌더링되지 않고 숨겨지는지 확인
- [ ] 신규 트리를 하나 이상 만든 후 홈 진입 시, 최근 만들어진 러브트리 섹션이 나타나는지 확인
- [ ] 카드 하단에 `N개의 순간 · 조회 V · 좋아요 L · 공유 S` 가 표시되는지 확인

---

## 2. 에디터 페이지 (editor.html)

### 2-1. 기본 동작

- [ ] URL `editor.html?id=someId` 로 접근했을 때 트리가 정상 로드되는지 확인
- [ ] 더미 트리(bts 등) 같은 읽기 전용 트리는 상단에 읽기 전용 토스트/스타일이 적용되는지 확인

### 2-2. 통계 필드(viewCount / shareCount / likeCount / nodeCount)

1. **뷰 카운트(viewCount)**
   - [ ] 특정 트리의 Firestore 문서에서 현재 `viewCount` 값 확인
   - [ ] 에디터에서 해당 트리를 새 탭 또는 새 창에서 열기
   - [ ] Firestore 문서를 새로고침하여 `viewCount` 가 1 증가했는지 확인
   - [ ] 여러 번 새로고침 시 viewCount가 누적 증가하는지 확인

2. **공유 카운트(shareCount)**
   - [ ] 에디터 상단 `Share` 버튼 클릭 → 링크 복사 토스트가 뜨는지 확인
   - [ ] Firestore에서 해당 트리의 `shareCount` 값이 1 증가했는지 확인

3. **좋아요(likes/likeCount)**
   - [ ] 로그인한 상태에서 하트 버튼 클릭 시 색상/배경이 바뀌고 `like-count` 숫자가 증가하는지 확인
   - [ ] Firestore 문서에 `likes` 배열에 본인 uid가 들어가고, `likeCount` 값이 일관되게 반영되는지 확인
   - [ ] 한 번 더 누르면 좋아요 해제가 되고, Firestore에도 반영되는지 확인

4. **노드 수(nodeCount)**
   - [ ] 새 트리를 만들었을 때 초기 `nodeCount` 값이 1(기본 노드)인지 확인
   - [ ] 노드를 여러 개 추가/삭제 후 저장 → 다시 홈/에디터에서 로드했을 때 nodeCount가 실제 노드 개수와 일치하는지 확인

### 2-3. 에디터 상단 통계 배너

- [ ] 상단 바에 `노드 N · 순간 M · 조회 V · 좋아요 L · 공유 S` 형식의 작은 배지가 보이는지 확인
- [ ] 새 노드 추가 시 N이 바로 증가하는지 확인
- [ ] 모먼트(순간) 추가 시 M 값이 바로 증가하는지 확인
- [ ] 좋아요/공유 버튼 사용 시 L, S 값이 즉시 업데이트되는지 확인

### 2-4. lastOpened 필드

- [ ] 에디터에서 트리를 엽니다.
- [ ] Firestore 문서에 `lastOpened` 필드가 `Timestamp` 타입으로 기록되는지 확인
- [ ] 같은 트리를 다른 시간에 다시 열었을 때, lastOpened가 최신 시각으로 갱신되는지 확인

---

## 3. 커뮤니티 페이지 (community.html)

- [ ] 상단 헤더/네비게이션이 홈/에디터와 스타일/폭이 일관적인지 확인
- [ ] "커뮤니티" 메뉴로 이동 시 레이아웃이 갑자기 좁아지거나 하는 느낌이 없는지 확인
- [ ] 정렬 버튼(최신순/인기순 등)이 정상 동작하고 콘솔 에러가 없는지 확인
- [ ] 데모 커뮤니티 글 생성 기능이 있다면, 글/댓글/좋아요 수가 UI/Firestore 모두에서 맞는지 확인

---

## 4. 관리자 페이지 (admin.html)

### 4-1. 로그인 및 권한

- [ ] 관리자 계정으로 로그인했을 때만 admin 화면이 열리는지 확인
- [ ] 비관리자 계정 / 로그아웃 상태에서 접근 시 차단 또는 리디렉션이 되는지 확인

### 4-2. 사용자 관리

- [ ] 사용자 목록이 로드되고, 각 행에 프로필/이메일/등급/최근 접속이 정상 표시되는지 확인
- [ ] Role 드롭다운을 변경했을 때 `role`, `isDemo`, `isAiBot` 플래그가 Firestore에 기대대로 저장되는지 확인
- [ ] AI 유저/데모 유저 필터가 정상 동작하는지 확인

### 4-3. 데모 데이터

- [ ] "데모 사용자 생성" / "데모 러브트리 생성" / "커뮤니티 데모 글 생성" 버튼이 동작하고, 생성 개수 모달이 정상 동작하는지 확인
- [ ] 데모 트리 생성 시 노드에 기본 moments/description이 포함되어 있고, 에디터에서 봤을 때 빈 노드가 아닌지 확인

### 4-4. nodeCount 재계산 유틸 (admin-13)

- [ ] 설정 > 데모 데이터 섹션에서 "모든 트리 노드 수 재계산" 버튼 클릭
- [ ] 경고 확인 후 진행 → 완료 알림이 뜨는지 확인
- [ ] Firestore에서 임의의 여러 트리를 확인했을 때, 각 문서의 `nodeCount`가 `nodes.length`와 일치하는지 샘플 확인

### 4-5. AI 로그

- [ ] AI 관련 기능(데모 트리 생성, AI 반응 생성 등) 실행 후 AI 로그 탭에 기록이 쌓이는지 확인
- [ ] 시간/유형/봇 계정/요약 정보가 정상 표시되는지 확인

---

## 5. 데모/AI 관련 기능

- [ ] 관리자에서 AI 데모 트리 생성 시, 생성된 트리에 노드가 3~4개 이상 존재하는지 확인
- [ ] 각 노드에 `title`, `date`, (가능하면) `videoId`와 1개 이상의 `moments`가 들어 있는지 확인
- [ ] 에디터에서 해당 트리를 열었을 때, 타임라인/노드 상세 모달에서 moments가 실제로 렌더링되는지 확인

---

## 6. 내비게이션 / 헤더 / 반응형

- [ ] 홈 상단에서 "커뮤니티" 링크로 이동, 다시 홈/에디터로 이동하는 플로우에서 헤더 UI/폭이 튀지 않는지 확인
- [ ] 로고/메인 타이틀/"첫 화면" 서브타이틀과 커뮤니티 링크의 위치가 기획대로 보이는지 확인
- [ ] 모바일 화면(좁은 폭)에서 상단 바 요소들이 줄바꿈되더라도 사용 가능하게 배치되는지 확인 (버튼들이 겹치지 않는지)

---

## 7. 회귀 테스트(중요 기본 기능)

- [ ] 새 트리 만들기 → 노드 추가/삭제 → 저장 → 새로고침 후에도 데이터 유지
- [ ] 로그인/로그아웃 플로우가 기존과 동일하게 동작 (에러/무한로딩 없음)
- [ ] 즐겨찾기/좋아요, 댓글, 공유, 기본 이동 등 과거에 잘 되던 기능이 여전히 문제 없는지 주요 시나리오만 샘플링

---

## 8. 배포 전 최종 체크

- [ ] 크롬 개발자 도구 콘솔에 에러가 없는지 홈/에디터/커뮤니티/관리자 각 페이지에서 확인
- [ ] 네트워크 탭에서 404/500 등 실패 요청이 없는지 샘플 확인
- [ ] Firebase Firestore 규칙 상, 비로그인/비관리자 상태에서 민감 데이터에 접근이 막혀 있는지 다시 한 번 샘플 확인

---

## 9. 배포 순서 메모 (요약)

1. **로컬에서 변경사항 커밋**
   - `git status`로 변경 파일 확인
   - `git add .`
   - `git commit -m "테스트/통계/관리자 유틸 업데이트"`

2. **GitHub 푸시**
   - `git push origin main` (또는 사용 중인 브랜치명)

3. **Firebase Hosting 배포**
   - `firebase deploy --only hosting` (프로젝트/타겟 이름은 기존 설정 기준)

4. **Netlify 배포**
   - Git 연동된 경우: GitHub 푸시 후 자동 빌드/배포 확인
   - 수동 배포인 경우: Netlify 대시보드에서 새 배포 트리거 혹은 파일 업로드

> 위 순서는 실제 프로젝트 설정에 따라 약간 다를 수 있습니다. 현재 설정된 Firebase/Netlify 스크립트를 기준으로 커맨드는 조정하세요.
